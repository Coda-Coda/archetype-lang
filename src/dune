(env
  (dev
    (flags (:standard -g -w Y -w Z -w -9 -w -23 -w +28 -w +33 -w -32)))
  (release
    (flags (:standard))))

(ocamllex lexer)
(menhir (flags --explain) (modules parser))

(library
  (modes native)
  (name cmlLib)
  (preprocess
    (pps ppx_deriving.std)
  )
(library_flags (-linkall))
  (modules core ident location parseUtils parseTree parser lexer io model printer translate)
  (libraries menhirLib why3 ppx_deriving)
)

(library
  (modes native)
  (name w3plugin)
  (preprocess
    (pps ppx_deriving.std)
  )
  (library_flags (-linkall))
  (modules liq_printer w3plugin)
  (libraries cmlLib menhirLib why3 ppx_deriving)
)

(executables
  (modes native)
  (preprocess
    (pps ppx_deriving.std)
  )
  (modules compiler)
  (libraries cmlLib menhirLib why3 ppx_deriving)
  (names     compiler))

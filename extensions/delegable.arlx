archetype extension delegable (

  asset anAsset {
    aRole[%delegable%] : role;
  }

  action aTransaction (anasset : pkey of anAsset) {
     called by anAsset[anasset].aRole
  }

) {

  asset <%aRole>Operators identified by arole {
    arole      : role;
    operators  : address collection;
  }

  action setDelegate<%aRole> (arole : role, operator : address) {
     called by arole
     effect {
       <%aRole>Operators[owner].operators.add(operator)
     }
  }

  action rmDelegate<%aRole> (afield : arole, operator : address) {
     called by arole
     effect {
       <%aRole>Operators[owner].operators.remove(operator)
     }
  }

  action aTransaction (anasset : anAsset) {
     called by none
     require {
       c1 : <%aRole>Operators[anAsset[anasset].aRole].operators.contains(caller);
     }
  }

}

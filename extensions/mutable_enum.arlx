archetype extension mutable_enum (

  states[%mutable_enum arole] anenum

) = {

  action set_state_<%a> (new_val : anenum) = {

    called by arole
    condition mutable_enum_<%a> : state <= new_state
    effect    anenum := new_val
  }
}
